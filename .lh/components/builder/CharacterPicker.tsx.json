{
    "sourceFile": "components/builder/CharacterPicker.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1770750939039,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1770753033130,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,53 +1,100 @@\n \"use client\";\r\n \r\n+import { useState, useMemo } from \"react\";\r\n import { Character } from \"@/types/rotation\";\r\n import clsx from \"clsx\";\r\n+import { ChevronsDown, ChevronsUp } from \"lucide-react\";\r\n \r\n interface CharacterPickerProps {\r\n   characters: Character[];\r\n   value?: Character;\r\n   onChange: (character: Character) => void;\r\n }\r\n \r\n-export function CharacterPicker({\r\n-  characters,\r\n-  value,\r\n-  onChange,\r\n-}: CharacterPickerProps) {\r\n+export function CharacterPicker({ characters, value, onChange }: CharacterPickerProps) {\r\n+  const [isOpen, setIsOpen] = useState(false);\r\n+  const [search, setSearch] = useState(\"\");\r\n+\r\n+  // Filter characters based on search\r\n+  const filtered = useMemo(() => {\r\n+    const lower = search.toLowerCase();\r\n+    return characters.filter(\r\n+      (c) => c.name.toLowerCase().includes(lower)\r\n+    );\r\n+  }, [search, characters]);\r\n+\r\n+  // Handler when user selects character\r\n+  const handleSelect = (char: Character) => {\r\n+    onChange(char);\r\n+    setIsOpen(false); // auto collapse\r\n+    setSearch(\"\");    // reset search\r\n+  };\r\n+\r\n   return (\r\n-    <div className=\"grid grid-cols-4 gap-3\">\r\n-      {characters.map((char) => {\r\n-        const selected = value?.id === char.id;\r\n+    <div className=\"flex flex-col gap-2\">\r\n+      {/* Header / Toggle */}\r\n+      <button\r\n+        type=\"button\"\r\n+        onClick={() => setIsOpen(!isOpen)}\r\n+        className=\"flex justify-between items-center bg-slate-800 px-3 py-2 rounded-lg border border-white/10 text-sm font-medium hover:bg-slate-700\"\r\n+      >\r\n+        {value ? value.name : \"Select Character\"}\r\n+        {isOpen ? <ChevronsUp size={16} /> : <ChevronsDown size={16} />}\r\n+      </button>\r\n \r\n-        return (\r\n-          <button\r\n-            key={char.id}\r\n-            type=\"button\"\r\n-            onClick={() => onChange(char)}\r\n-            className={clsx(\r\n-              \"relative rounded-xl overflow-hidden border-2 transition focus:outline-none\",\r\n-              selected\r\n-                ? \"border-indigo-500 ring-2 ring-indigo-500/40\"\r\n-                : \"border-white/10 hover:border-white/30\"\r\n-            )}\r\n-          >\r\n-            <img\r\n-              src={char.image}\r\n-              alt={char.name}\r\n-              loading=\"lazy\"\r\n-              onError={(e) => {\r\n-                (e.currentTarget as HTMLImageElement).src =\r\n-                  \"/characters/placeholder.png\";\r\n-              }}\r\n-              className=\"w-full h-full object-cover\"\r\n-            />\r\n+      {/* Collapsible content */}\r\n+      {isOpen && (\r\n+        <div className=\"bg-slate-900 border border-white/10 rounded-lg p-3 flex flex-col gap-3 max-h-64 overflow-y-auto\">\r\n+          {/* Search bar */}\r\n+          <input\r\n+            type=\"text\"\r\n+            value={search}\r\n+            onChange={(e) => setSearch(e.target.value)}\r\n+            placeholder=\"Search...\"\r\n+            className=\"bg-slate-800 border border-white/20 rounded px-2 py-1 text-sm w-full\"\r\n+          />\r\n \r\n-            <div className=\"absolute inset-x-0 bottom-0 bg-black/60 text-xs text-white text-center py-1\">\r\n-              {char.name}\r\n-            </div>\r\n-          </button>\r\n-        );\r\n-      })}\r\n+          {/* Character grid */}\r\n+          <div className=\"grid grid-cols-4 gap-3\">\r\n+            {filtered.map((char) => {\r\n+              const selected = value?.id === char.id;\r\n+              return (\r\n+                <button\r\n+                  key={char.id}\r\n+                  type=\"button\"\r\n+                  onClick={() => handleSelect(char)}\r\n+                  className={clsx(\r\n+                    \"relative rounded-xl overflow-hidden border-2 transition focus:outline-none\",\r\n+                    selected\r\n+                      ? \"border-indigo-500 ring-2 ring-indigo-500/40\"\r\n+                      : \"border-white/10 hover:border-white/30\"\r\n+                  )}\r\n+                >\r\n+                  <img\r\n+                    src={char.image}\r\n+                    alt={char.name}\r\n+                    loading=\"lazy\"\r\n+                    onError={(e) => {\r\n+                      (e.currentTarget as HTMLImageElement).src =\r\n+                        \"/characters/placeholder.png\";\r\n+                    }}\r\n+                    className=\"w-full h-full object-cover\"\r\n+                  />\r\n+\r\n+                  <div className=\"absolute inset-x-0 bottom-0 bg-black/60 text-xs text-white text-center py-1\">\r\n+                    {char.name}\r\n+                  </div>\r\n+                </button>\r\n+              );\r\n+            })}\r\n+          </div>\r\n+\r\n+          {/* Empty state */}\r\n+          {filtered.length === 0 && (\r\n+            <p className=\"text-xs text-white/50 text-center\">No characters found</p>\r\n+          )}\r\n+        </div>\r\n+      )}\r\n     </div>\r\n   );\r\n }\r\n"
                },
                {
                    "date": 1770759463565,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,9 @@\n \"use client\";\r\n \r\n+export const dynamic = \"force-static\";\r\n+\r\n+\r\n import { useState, useMemo } from \"react\";\r\n import { Character } from \"@/types/rotation\";\r\n import clsx from \"clsx\";\r\n import { ChevronsDown, ChevronsUp } from \"lucide-react\";\r\n"
                }
            ],
            "date": 1770750939039,
            "name": "Commit-0",
            "content": "\"use client\";\r\n\r\nimport { Character } from \"@/types/rotation\";\r\nimport clsx from \"clsx\";\r\n\r\ninterface CharacterPickerProps {\r\n  characters: Character[];\r\n  value?: Character;\r\n  onChange: (character: Character) => void;\r\n}\r\n\r\nexport function CharacterPicker({\r\n  characters,\r\n  value,\r\n  onChange,\r\n}: CharacterPickerProps) {\r\n  return (\r\n    <div className=\"grid grid-cols-4 gap-3\">\r\n      {characters.map((char) => {\r\n        const selected = value?.id === char.id;\r\n\r\n        return (\r\n          <button\r\n            key={char.id}\r\n            type=\"button\"\r\n            onClick={() => onChange(char)}\r\n            className={clsx(\r\n              \"relative rounded-xl overflow-hidden border-2 transition focus:outline-none\",\r\n              selected\r\n                ? \"border-indigo-500 ring-2 ring-indigo-500/40\"\r\n                : \"border-white/10 hover:border-white/30\"\r\n            )}\r\n          >\r\n            <img\r\n              src={char.image}\r\n              alt={char.name}\r\n              loading=\"lazy\"\r\n              onError={(e) => {\r\n                (e.currentTarget as HTMLImageElement).src =\r\n                  \"/characters/placeholder.png\";\r\n              }}\r\n              className=\"w-full h-full object-cover\"\r\n            />\r\n\r\n            <div className=\"absolute inset-x-0 bottom-0 bg-black/60 text-xs text-white text-center py-1\">\r\n              {char.name}\r\n            </div>\r\n          </button>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n"
        }
    ]
}